<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Plot</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            background-color: #f4f4f4;
        }

        .atom {
            position: absolute;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: radial-gradient(circle at 20px 20px, #ffffff, #0000ff);
        }

        #atom-container {
            position: absolute;
            top: 10%;
            left: 50%;
            transform: translateX(-50%);
        }

        #slider-container {
            position: absolute;
            top: 20%;
            left: 50%;
            transform: translateX(-50%);
            width: 50%;
        }

        #plot-container {
            display: flex;
            flex-direction: column;
            justify-content: center;
            width: 90%;
            max-width: 1000px;
            margin: 1px auto;
            position: relative;
        }

        #plot {
            width: 100%;
            height: 400px;
        }

        #distance-container {
            margin-top: 10px;
        }
    </style>
</head>

<body>
    <h1>Interactive Plot of Lennard-Jones Potential</h1>
    <div id="plot-container">
        <div id="plot"></div>

        <div id="atom-container">
            <div class="atom" id="atom1" style="left: 0;"></div>
            <div class="atom-label" id="atom1-label">atom 1</div>
            <div class="atom" id="atom2" style="left: 161.6px;"></div>
            <div class="atom-label" id="atom2-label" style="left: 161.6px;">atom 2</div>
        </div>

        <div id="slider-container">
            <input type="range" id="slider" min="1.04" max="2.5" value="2.3" step="0.01">
            <div id="distance-container">
                <p>Distance: <span id="distance-value">2.3</span></p>
            </div>
        </div>
    </div>

    <script>
        function lennardJones(r) {
            const epsilon = 5.5;
            const sigma = Math.pow(2, 1 / 6);
            return 4 * epsilon * (Math.pow(sigma / r, 12) - (Math.pow(sigma / r, 6)));
        }

        const rValues = [];
        const energyValues = [];
        for (let r = 1.04; r <= 2.5; r += 0.01) {
            rValues.push(r);
            energyValues.push(lennardJones(r));
        }

        const initialR = 2.3;
        const initialEnergy = lennardJones(initialR);

        const trace1 = {
            x: rValues,
            y: energyValues,
            mode: 'lines',
            name: 'Lennard-Jones Potential'
        };

        const trace2 = {
            x: [initialR],
            y: [initialEnergy],
            mode: 'markers',
            marker: { size: 12, color: 'red' },
            name: 'Atom Spacing'
        };

        const data = [trace1, trace2];
        const layout = {
            title: 'Potential Energy Between Two Atoms',
            xaxis: { title: 'Distance (r)', range: [1, 2.5] },
            yaxis: { title: 'Energy', range: [-7, 20] },
            showlegend: false
        };

        Plotly.newPlot('plot', data, layout);

        document.getElementById('slider').oninput = function () {
            const r = parseFloat(this.value);
            const energy = lennardJones(r);
            document.getElementById('distance-value').innerText = r.toFixed(2);

            Plotly.restyle('plot', 'x', [[r]], 1);
            Plotly.restyle('plot', 'y', [[energy]], 1);

            const atom2 = document.getElementById('atom2');
            const atom2Label = document.getElementById('atom2-label');
            const initialR = Math.pow(2, 1 / 3);
            const scaledR = r / initialR;
            const newLeft = scaledR * 70;
            atom2.style.left = `${newLeft}px`;
            atom2Label.style.left = `${newLeft}px`;
        };
    </script>
</body>

</html>
